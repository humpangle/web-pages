<!DOCTYPE html> <html lang=en class=[scrollbar-gutter:stable] style><!--
 Page saved with SingleFile 
 url: https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto 
 saved date: Wed Dec 27 2023 21:32:05 GMT-0500 (Eastern Standard Time)
--><meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1">
<meta name=csrf-token content=HgRENBkCIBgeDF4vUQYzD1pAOjVRBSJ7R32RawHjZS2mdVCI-2uz0Gx1>
<title data-prefix="Dan Schultzer: ">Dan Schultzer: Prefixed base62 UUIDv7 Object IDs with Ecto</title>
<link rel=icon href="data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgNjQgNjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCB5Mj0iMSIgeDI9IjEiIHkxPSIwLjE0ODQ0IiB4MT0iMC41MzEyNSIgaWQ9ImdyYWRpZW50Ij4KICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1vcGFjaXR5PSIwLjk5NjA5IiBzdG9wLWNvbG9yPSIjNWIyMWI2Ii8+CiAgICA8c3RvcCBvZmZzZXQ9IjAuOTkyMTkiIHN0b3Atb3BhY2l0eT0iMC45NzY1NiIgc3RvcC1jb2xvcj0iI2ZmODMwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPGc+CiAgICA8c3ZnIHg9IjAiIHk9IjAiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ1cmwoI2dyYWRpZW50KSI+CiAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMgNmEzIDMgMCAwMTMtM2gxMmEzIDMgMCAwMTMgM3YxMmEzIDMgMCAwMS0zIDNINmEzIDMgMCAwMS0zLTNWNnptMTQuMjUgNmEuNzUuNzUgMCAwMS0uMjIuNTNsLTIuMjUgMi4yNWEuNzUuNzUgMCAxMS0xLjA2LTEuMDZMMTUuNDQgMTJsLTEuNzItMS43MmEuNzUuNzUgMCAxMTEuMDYtMS4wNmwyLjI1IDIuMjVjLjE0MS4xNC4yMi4zMzEuMjIuNTN6bS0xMC4yOC0uNTNhLjc1Ljc1IDAgMDAwIDEuMDZsMi4yNSAyLjI1YS43NS43NSAwIDEwMS4wNi0xLjA2TDguNTYgMTJsMS43Mi0xLjcyYS43NS43NSAwIDEwLTEuMDYtMS4wNmwtMi4yNSAyLjI1eiIgY2xpcC1ydWxlPSJldmVub2RkIiAvPgogICAgPC9zdmc+CiAgPC9nPgo8L3N2Zz4=" type=image/svg+xml>
<meta property=og:site_name content="Dan Schultzer">
<meta name=description content="How I set up Ecto to use prefixed base62 UUIDv7 Object IDs.">
<meta name=author content="Dan Schultzer">
<meta property=og:type content=article>
<meta property=og:title content="Prefixed base62 UUIDv7 Object IDs with Ecto">
<meta property=og:description content="How I set up Ecto to use prefixed base62 UUIDv7 Object IDs.">
<meta property=og:url content=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto>
<meta property=og:published_time content=2023-06-11>
<meta property=og:image content="https://danschultzer.com/images/posts/2023/06-11-prefixed-base62-uuidv7-object-ids-with-ecto.open-graph-1bf8cee991effca93be6a2485c41d749.png?vsn=d">
<meta property=og:tag content=ecto>
<meta property=og:tag content=base62>
<meta property=og:tag content=uuidv7>
<meta property=twitter:card content=summary_large_image>
<meta property=twitter:title content="Prefixed base62 UUIDv7 Object IDs with Ecto">
<meta property=twitter:description content="How I set up Ecto to use prefixed base62 UUIDv7 Object IDs.">
<meta property=twitter:image content="https://danschultzer.com/images/posts/2023/06-11-prefixed-base62-uuidv7-object-ids-with-ecto.open-graph-1bf8cee991effca93be6a2485c41d749.png?vsn=d">
<meta property=article:published_time content=2023-06-11>
<link href=https://danschultzer.com/atom.xml type=application/atom+xml rel=alternate title="Atom feed">
<style>@font-face{font-family:"Cormorant Garamond";font-style:normal;font-weight:500;src:url(data:font/woff2;base64,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)format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style>
<style>/*! tailwindcss v3.2.7 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}h2{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}dd,h1,h2,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}:disabled{cursor:default}iframe,svg{display:block;vertical-align:middle}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em}::-webkit-datetime-edit,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-meridiem-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-year-field{padding-bottom:0;padding-top:0}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0#0000;--tw-ring-shadow:0 0#0000;--tw-shadow:0 0#0000;--tw-shadow-colored:0 0#0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }@media (min-width:640px){}@media (min-width:768px){}@media (min-width:1024px){}@media (min-width:1280px){}@media (min-width:1536px){}.hero-arrow-right-mini{--hero-arrow-right-mini:url(data:image/svg+xml;utf8,<svg\ xmlns=\"http://www.w3.org/2000/svg\"\ viewBox=\"0\ 0\ 20\ 20\"\ fill=\"currentColor\"\ aria-hidden=\"true\">\ \ <path\ fill-rule=\"evenodd\"\ d=\"M3\ 10a.75.75\ 0\ 01.75-.75h10.638L10.23\ 5.29a.75.75\ 0\ 111.04-1.08l5.5\ 5.25a.75.75\ 0\ 010\ 1.08l-5.5\ 5.25a.75.75\ 0\ 11-1.04-1.08l4.158-3.96H3.75A.75.75\ 0\ 013\ 10z\"\ clip-rule=\"evenodd\"\/><\/svg>);-webkit-mask:var(--hero-arrow-right-mini);mask:var(--hero-arrow-right-mini);-webkit-mask-repeat:no-repeat;mask-repeat:initial}.hero-arrow-right-mini{background-color:currentColor;vertical-align:middle}.hero-envelope-solid{--hero-envelope-solid:url(data:image/svg+xml;utf8,<svg\ xmlns=\"http://www.w3.org/2000/svg\"\ viewBox=\"0\ 0\ 24\ 24\"\ fill=\"currentColor\"\ aria-hidden=\"true\">\ \ <path\ d=\"M1.5\ 8.67v8.58a3\ 3\ 0\ 003\ 3h15a3\ 3\ 0\ 003-3V8.67l-8.928\ 5.493a3\ 3\ 0\ 01-3.144\ 0L1.5\ 8.67z\"\/>\ \ <path\ d=\"M22.5\ 6.908V6.75a3\ 3\ 0\ 00-3-3h-15a3\ 3\ 0\ 00-3\ 3v.158l9.714\ 5.978a1.5\ 1.5\ 0\ 001.572\ 0L22.5\ 6.908z\"\/><\/svg>);-webkit-mask:var(--hero-envelope-solid);mask:var(--hero-envelope-solid);-webkit-mask-repeat:no-repeat;mask-repeat:initial}.hero-envelope-solid{background-color:currentColor;display:inline-block;vertical-align:middle}.prose{color:var(--tw-prose-body)}.prose :where([class~=lead]):not(:where([class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}.prose :where(a):not(:where([class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-left:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-left:1.625em}.prose :where(ol>li):not(:where([class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(hr):not(:where([class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}.prose :where(blockquote):not(:where([class~=not-prose] *)){border-left-color:var(--tw-prose-quote-borders);border-left-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-left:1em;quotes:"“""”""‘""’"}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}.prose :where(h1 strong):not(:where([class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}.prose :where(h2 strong):not(:where([class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}.prose :where(h3 strong):not(:where([class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}.prose :where(h4 strong):not(:where([class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(figure>*):not(:where([class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(figcaption):not(:where([class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose :where(code):not(:where([class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding:.8571429em 1.1428571em}.prose :where(pre code):not(:where([class~=not-prose] *)){background-color:initial;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.prose :where(pre code):not(:where([class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;text-align:left;width:100%}.prose :where(thead):not(:where([class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}.prose :where(thead th):not(:where([class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-bottom:.5714286em;padding-left:.5714286em;padding-right:.5714286em;vertical-align:bottom}.prose :where(tbody tr):not(:where([class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}.prose :where(tbody tr:last-child):not(:where([class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose] *)){vertical-align:initial}.prose :where(tfoot):not(:where([class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}.prose :where(tfoot td):not(:where([class~=not-prose] *)){vertical-align:top}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:#00000080;--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151}.prose :where(p):not(:where([class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where(video):not(:where([class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(figure):not(:where([class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(li):not(:where([class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}.prose :where(ol>li):not(:where([class~=not-prose] *)){padding-left:.375em}.prose :where(ul>li):not(:where([class~=not-prose] *)){padding-left:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(.prose>ul>li>:first-child):not(:where([class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>:last-child):not(:where([class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>:first-child):not(:where([class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>:last-child):not(:where([class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(hr+*):not(:where([class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose] *)){padding-left:0}.prose :where(thead th:last-child):not(:where([class~=not-prose] *)){padding-right:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose] *)){padding:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose] *)){padding-left:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose] *)){padding-right:0}.prose :where(.prose>:first-child):not(:where([class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose] *)){margin-bottom:0}.prose-xl{font-size:1.25rem}.prose-xl :where(p):not(:where([class~=not-prose] *)){margin-bottom:1.2em;margin-top:1.2em}.prose-xl :where([class~=lead]):not(:where([class~=not-prose] *)){font-size:1.2em;line-height:1.5;margin-bottom:1em;margin-top:1em}.prose-xl :where(blockquote):not(:where([class~=not-prose] *)){margin-bottom:1.6em;margin-top:1.6em;padding-left:1.0666667em}.prose-xl :where(h1):not(:where([class~=not-prose] *)){font-size:2.8em;line-height:1;margin-bottom:.8571429em;margin-top:0}.prose-xl :where(h2):not(:where([class~=not-prose] *)){font-size:1.8em;line-height:1.1111111;margin-bottom:.8888889em;margin-top:1.5555556em}.prose-xl :where(h3):not(:where([class~=not-prose] *)){font-size:1.5em;line-height:1.3333333;margin-bottom:.6666667em;margin-top:1.6em}.prose-xl :where(h4):not(:where([class~=not-prose] *)){line-height:1.6;margin-bottom:.6em;margin-top:1.8em}.prose-xl :where(img):not(:where([class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose-xl :where(video):not(:where([class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose-xl :where(figure):not(:where([class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose-xl :where(figure>*):not(:where([class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose-xl :where(figcaption):not(:where([class~=not-prose] *)){font-size:.9em;line-height:1.5555556;margin-top:1em}.prose-xl :where(code):not(:where([class~=not-prose] *)){font-size:.9em}.prose-xl :where(h2 code):not(:where([class~=not-prose] *)){font-size:.8611111em}.prose-xl :where(h3 code):not(:where([class~=not-prose] *)){font-size:.9em}.prose-xl :where(pre):not(:where([class~=not-prose] *)){border-radius:.5rem;font-size:.9em;line-height:1.7777778;margin-bottom:2em;margin-top:2em;padding:1.1111111em 1.3333333em}.prose-xl :where(ol):not(:where([class~=not-prose] *)){margin-bottom:1.2em;margin-top:1.2em;padding-left:1.6em}.prose-xl :where(ul):not(:where([class~=not-prose] *)){margin-bottom:1.2em;margin-top:1.2em;padding-left:1.6em}.prose-xl :where(li):not(:where([class~=not-prose] *)){margin-bottom:.6em;margin-top:.6em}.prose-xl :where(ol>li):not(:where([class~=not-prose] *)){padding-left:.4em}.prose-xl :where(ul>li):not(:where([class~=not-prose] *)){padding-left:.4em}.prose-xl :where(.prose>ul>li p):not(:where([class~=not-prose] *)){margin-bottom:.8em;margin-top:.8em}.prose-xl :where(.prose>ul>li>:first-child):not(:where([class~=not-prose] *)){margin-top:1.2em}.prose-xl :where(.prose>ul>li>:last-child):not(:where([class~=not-prose] *)){margin-bottom:1.2em}.prose-xl :where(.prose>ol>li>:first-child):not(:where([class~=not-prose] *)){margin-top:1.2em}.prose-xl :where(.prose>ol>li>:last-child):not(:where([class~=not-prose] *)){margin-bottom:1.2em}.prose-xl :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose] *)){margin-bottom:.8em;margin-top:.8em}.prose-xl :where(hr):not(:where([class~=not-prose] *)){margin-bottom:2.8em;margin-top:2.8em}.prose-xl :where(hr+*):not(:where([class~=not-prose] *)){margin-top:0}.prose-xl :where(h2+*):not(:where([class~=not-prose] *)){margin-top:0}.prose-xl :where(h3+*):not(:where([class~=not-prose] *)){margin-top:0}.prose-xl :where(h4+*):not(:where([class~=not-prose] *)){margin-top:0}.prose-xl :where(table):not(:where([class~=not-prose] *)){font-size:.9em;line-height:1.5555556}.prose-xl :where(thead th):not(:where([class~=not-prose] *)){padding-bottom:.8888889em;padding-left:.6666667em;padding-right:.6666667em}.prose-xl :where(thead th:first-child):not(:where([class~=not-prose] *)){padding-left:0}.prose-xl :where(thead th:last-child):not(:where([class~=not-prose] *)){padding-right:0}.prose-xl :where(tbody td,tfoot td):not(:where([class~=not-prose] *)){padding:.8888889em .6666667em}.prose-xl :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose] *)){padding-left:0}.prose-xl :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose] *)){padding-right:0}.prose-xl :where(.prose>:first-child):not(:where([class~=not-prose] *)){margin-top:0}.prose-xl :where(.prose>:last-child):not(:where([class~=not-prose] *)){margin-bottom:0}.prose-quoteless :where(code.inline):not(:where([class~=not-prose] *)):before{content:none}.prose-quoteless :where(code.inline):not(:where([class~=not-prose] *)):after{content:none}.prose-quoteless :where(code.inline):not(:where([class~=not-prose] *)){background-color:#0000001a;border-radius:.5rem;font-size:.7em!important;padding:.3rem}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.m-2{margin:.5rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.mb-3{margin-bottom:.75rem}.ml-6{margin-left:1.5rem}.mr-2{margin-right:.5rem}.mr-6{margin-right:1.5rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.h-0\.5{height:.125rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.min-h-screen{min-height:100vh}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-none{max-width:none}@keyframes background-gradient{0%{background-position:0 0}50%{background-position:100%0}to{background-position:0 0}}.cursor-pointer{cursor:pointer}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.rounded-full{border-radius:9999px}.bg-neutral-200{--tw-bg-opacity:1;background-color:rgb(229 229 229/var(--tw-bg-opacity))}.bg-transparent{background-color:initial}.bg-violet-800{--tw-bg-opacity:1;background-color:rgb(91 33 182/var(--tw-bg-opacity))}.bg-violet-800\/50{background-color:#5b21b680}.p-2{padding:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-5{padding-bottom:1.25rem;padding-top:1.25rem}.py-8{padding-bottom:2rem;padding-top:2rem}.pb-5{padding-bottom:1.25rem}.pt-5{padding-top:1.25rem}.pt-8{padding-top:2rem}.text-center{text-align:center}.font-cormorant{font-family:Cormorant Garamond,serif}.text-5xl{font-size:3rem;line-height:1}.text-base{font-size:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-extrabold{font-weight:800}.font-light{font-weight:300}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-6{line-height:1.5rem}.leading-8{line-height:2rem}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.text-orange-200{--tw-text-opacity:1;color:rgb(254 215 170/var(--tw-text-opacity))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184/var(--tw-text-opacity))}.text-slate-50{--tw-text-opacity:1;color:rgb(248 250 252/var(--tw-text-opacity))}.text-slate-50\/50{color:#f8fafc80}.text-slate-50\/90{color:#f8fafce6}.underline{text-decoration-line:underline}.\[scrollbar-gutter\:stable\]{scrollbar-gutter:stable}.makeup{color:#f8f8f2}.makeup .bp{color:#f8f8f2}.makeup .c,.makeup .c1{color:#75715e}.makeup .k,.makeup .kd{color:#66d9ef}.makeup .kn{color:#f92672}.makeup .mi{color:#ae81ff}.makeup .n{color:#f8f8f2}.makeup .na{color:#a6e22e}.makeup .nc,.makeup .nf{color:#a6e22e}.makeup .no{color:#66d9ef}.makeup .o{color:#f92672}.makeup .p{color:#f8f8f2}.makeup .s,.makeup .sc{color:#e6db74}.makeup .si,.makeup .ss{color:#e6db74}@media (prefers-color-scheme:dark){.dark\:prose-invert{--tw-prose-body:var(--tw-prose-invert-body);--tw-prose-headings:var(--tw-prose-invert-headings);--tw-prose-lead:var(--tw-prose-invert-lead);--tw-prose-links:var(--tw-prose-invert-links);--tw-prose-bold:var(--tw-prose-invert-bold);--tw-prose-counters:var(--tw-prose-invert-counters);--tw-prose-bullets:var(--tw-prose-invert-bullets);--tw-prose-hr:var(--tw-prose-invert-hr);--tw-prose-quotes:var(--tw-prose-invert-quotes);--tw-prose-quote-borders:var(--tw-prose-invert-quote-borders);--tw-prose-captions:var(--tw-prose-invert-captions);--tw-prose-code:var(--tw-prose-invert-code);--tw-prose-pre-code:var(--tw-prose-invert-pre-code);--tw-prose-pre-bg:var(--tw-prose-invert-pre-bg);--tw-prose-th-borders:var(--tw-prose-invert-th-borders);--tw-prose-td-borders:var(--tw-prose-invert-td-borders)}.dark\:prose-quotelessDark :where(code.inline):not(:where([class~=not-prose] *)){background-color:#ffffff1a}}.hover\:bg-violet-800:hover{--tw-bg-opacity:1;background-color:rgb(91 33 182/var(--tw-bg-opacity))}.hover\:text-slate-200:hover{--tw-text-opacity:1;color:rgb(226 232 240/var(--tw-text-opacity))}.hover\:text-slate-50:hover{--tw-text-opacity:1;color:rgb(248 250 252/var(--tw-text-opacity))}.hover\:text-slate-50\/80:hover{color:#f8fafccc}.group:hover .group-hover\:bg-orange-300{--tw-bg-opacity:1;background-color:rgb(253 186 116/var(--tw-bg-opacity))}@media (prefers-color-scheme:dark){.dark\:bg-slate-800{--tw-bg-opacity:1;background-color:rgb(30 41 59/var(--tw-bg-opacity))}.dark\:bg-violet-800{--tw-bg-opacity:1;background-color:rgb(91 33 182/var(--tw-bg-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\:text-slate-50{--tw-text-opacity:1;color:rgb(248 250 252/var(--tw-text-opacity))}.dark\:text-slate-50\/80{color:#f8fafccc}.dark\:text-white\/50{color:#ffffff80}.hover\:dark\:bg-violet-800\/80:hover{background-color:#5b21b6cc}.hover\:dark\:text-slate-50\/80:hover{color:#f8fafccc}.group:hover .dark\:group-hover\:bg-orange-300\/50{background-color:#fdba7480}}@media (min-width:640px){}@media (min-width:1024px){}@media (min-width:1280px){}</style>
<meta name=referrer content=no-referrer><link rel=canonical href=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
 <body class=bg-violet-800>
<div data-phx-main data-phx-session=SFMyNTY.g2gDaAJhBXQAAAAIdwJpZG0AAAAUcGh4LUY2VGVDaEluY0lkbDlXMGl3BHZpZXd3FkVsaXhpci5EYW5XZWIuQmxvZ0xpdmV3CnBhcmVudF9waWR3A25pbHcHc2Vzc2lvbnQAAAAAdwZyb3V0ZXJ3FEVsaXhpci5EYW5XZWIuUm91dGVydwhyb290X3BpZHcDbmlsdwxsaXZlX3Nlc3Npb25oAncHZGVmYXVsdG4IAA1jzXDFmqIXdwlyb290X3ZpZXd3FkVsaXhpci5EYW5XZWIuQmxvZ0xpdmVuBgAAR0OujAFiAAFRgA.yZLC-QLWC91sco6fviWrco7EdLDRNWT7_APXgec6qtk data-phx-static=SFMyNTY.g2gDaAJhBXQAAAADdwJpZG0AAAAUcGh4LUY2VGVDaEluY0lkbDlXMGl3BWZsYXNodAAAAAB3CmFzc2lnbl9uZXdqbgYAAEdDrowBYgABUYA.rBGd0XMIWWW72rwsAGYhSmASR-e1vVvNo1do1zi27Uk id=phx-F6TeChIncIdl9W0i class=phx-connected data-phx-root-id=phx-F6TeChIncIdl9W0i><header class="bg-violet-800 text-slate-50 dark:text-slate-50/80">
 <nav class="mx-auto px-4 py-5 max-w-2xl flex items-center justify-between">
 <ul class="flex items-center">
 <li class=mr-6>
 <a href=https://danschultzer.com/ data-phx-link=redirect data-phx-link-state=push class="group cursor-pointer font-semibold uppercase hover:text-slate-200">
 <span class=block>Home</span>
 <span class="block h-0.5 w-full bg-transparent group-hover:bg-orange-300 dark:group-hover:bg-orange-300/50"></span>
 </a>
 </li>
 <li class=mr-6>
 <a href=https://danschultzer.com/about data-phx-link=redirect data-phx-link-state=push class="group cursor-pointer font-semibold uppercase hover:text-slate-200">
 <span class=block>About</span>
 <span class="block h-0.5 w-full bg-transparent group-hover:bg-orange-300 dark:group-hover:bg-orange-300/50"></span>
 </a>
 </li>
 </ul>
 <ul class="flex items-center">
 <li class="group ml-6">
 <a href=https://github.com/danschultzer class="cursor-pointer hover:text-slate-200" aria-label=Github>
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-6 h-6" aria-hidden=true>
 <title>Github</title>
 <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
</svg>
 </a>
 </li>
 <li class="group ml-6">
 <a href=https://mastodon.online/@danschultzer class="cursor-pointer hover:text-slate-200" rel=me aria-label=Mastodon>
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16" stroke=none fill=currentColor class="w-6 h-6" aria-hidden=true>
 <title>Mastodon</title>
 <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"></path>
</svg>
 </a>
 </li>
 <li class="group ml-6">
 <a href=https://danschultzer.com/atom.xml class="cursor-pointer hover:text-slate-200" rel=me aria-label="Atom feed">
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48" fill=currentColor stroke=none class="w-6 h-6" aria-hidden=true>
 <title>RSS</title>
 <path fill-rule=evenodd clip-rule=evenodd d="M0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24ZM14.4002 30.4C14.4002 32.1672 15.833 33.6 17.6002 33.6C19.3674 33.6 20.8002 32.1672 20.8002 30.4C20.8002 28.6328 19.3674 27.2 17.6002 27.2C15.833 27.2 14.4002 28.6328 14.4002 30.4ZM36.8 33.6C36.8 21.2488 26.7513 11.2 14.4002 11.2V15.4664C24.3993 15.4664 32.5336 23.6008 32.5336 33.6H36.8ZM29.3334 33.6C29.3334 25.3656 22.6343 18.6664 14.4 18.6664V22.9336C20.2815 22.9336 25.0671 27.7184 25.0671 33.6H29.3334Z"></path>
</svg>
 </a>
 </li>
 </ul>
 </nav>
</header>
<main class="min-h-screen bg-neutral-200 dark:bg-slate-800 text-black dark:text-slate-50/80">
 
<div class="bg-violet-800 text-slate-50 dark:text-gray-300">
 <div class="mx-auto px-4 max-w-2xl">
 <div class="py-5 text-center font-cormorant">
 <p class=text-sm>
 </p><dt class=sr-only>Published on</dt>
 <dd class="text-base font-medium leading-6 text-slate-50/50">
 <time datetime=2023-06-11>2023-06-11</time>
 </dd>
 <p></p>
 <h1 class="text-5xl font-extrabold">Prefixed base62 UUIDv7 Object IDs with Ecto</h1>
 </div>
 <ul class="flex items-center justify-center pb-5 text-slate-50/50">
 <li class=mx-3>
 <a href="mailto:?subject=Dan%20Schultzer:%20Prefixed%20base62%20UUIDv7%20Object%20IDs%20with%20Ecto&amp;body=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto" class="cursor-pointer hover:text-slate-50/80" aria-label="Share over mail">
 <span class="hero-envelope-solid w-6 h-6"></span>
 </a>
 </li>
 <li class=mx-3>
 <a href="https://reddit.com/submit?url=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto&amp;title=Dan%20Schultzer:%20Prefixed%20base62%20UUIDv7%20Object%20IDs%20with%20Ecto" class="cursor-pointer hover:text-slate-50/80" aria-label="Share on reddit">
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-6 h-6" aria-hidden=true>
 <title>Reddit</title>
 <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path>
</svg>
 </a>
 </li>
 <li class=mx-3>
 <a href="https://twitter.com/share?url=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto&amp;text=Dan%20Schultzer:%20Prefixed%20base62%20UUIDv7%20Object%20IDs%20with%20Ecto" class="cursor-pointer hover:text-slate-50/80" aria-label="Share on Twitter">
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-6 h-6" aria-hidden=true>
 <title>Twitter</title>
 <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path>
</svg>
 </a>
 </li>
 <li class=mx-3>
 <a href="https://www.facebook.com/sharer/sharer.php?u=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto" class="cursor-pointer hover:text-slate-50/80" aria-label="Share on facebook">
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-6 h-6" aria-hidden=true>
 <title>Facebook</title>
 <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
</svg>
 </a>
 </li>
 </ul>
 </div>
</div>
<div class="mx-auto px-4 pt-8 max-w-2xl">
 <ul class="flex flex-wrap justify-center">
 <li class="mx-1 my-2">
 <a href=https://danschultzer.com/tags/ecto data-phx-link=redirect data-phx-link-state=push class="text-sm font-light uppercase p-2 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80">
ecto
 </a>
 <li class="mx-1 my-2">
 <a href=https://danschultzer.com/tags/base62 data-phx-link=redirect data-phx-link-state=push class="text-sm font-light uppercase p-2 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80">
base62
 </a>
 <li class="mx-1 my-2">
 <a href=https://danschultzer.com/tags/uuidv7 data-phx-link=redirect data-phx-link-state=push class="text-sm font-light uppercase p-2 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80">
uuidv7
 </a>
 </li>
 </ul>
</div>
<div class="mx-auto px-4 max-w-4xl">
 <div class="prose dark:prose-invert py-8 prose-xl max-w-none font-cormorant leading-8 prose-quoteless dark:prose-quotelessDark dark:text-slate-50">
<p>
Ecto supports integer IDs and UUIDv4 out-of-the-box, but I needed both UUIDv7 and human-readable Object IDs. This was a breeze to implement in Ecto.</p>
<h2>
ID, UUIDv7, and Object ID</h2>
<p>
Incremental integer IDs (e.g. <code class=inline>21</code>) are easy to get started with. They take up little space and have a lexicographical order (aka index locality) which makes sorting easy. However, there are many downsides. They are vulnerable to enumeration attacks, can leak sensitive information, scaling and replication become a pain with key conflicts, and you can’t generate the ID offline (in your application logic) since we must know the previous ID.</p>
<p>
UUID (e.g. <code class=inline>3bff9b42-f5e4-425e-aca2-39b490dfc878</code>) solves all these issues by generating a unique string of alphanumeric characters. These can be generated offline and inserted as-is into the database. The risk of collision is extremely low. There are five different <a href=https://datatracker.ietf.org/doc/html/rfc4122>standard versions</a>. UUIDv4 is generally the preferred UUID version because of its low collision risk and only carries random data. It is what <code class=inline>Ecto.UUID</code> generates. The downside is that UUIDv4 doesn’t have index locality which makes sorting on the ID practically impossible.</p>
<p>
UUIDv7 (e.g. <code class=inline>0188aadc-f449-7818-8862-5eff12733f64</code>) is a proposed standard that solves the index locality issue of UUIDv4 by making the first part of the UUIDv7 a Unix epoch timestamp. It’s the favored UUID version in place of UUIDv4 in the <a href=https://www.ietf.org/archive/id/draft-peabody-dispatch-new-uuid-format-01.html>New UUID Formats IETF draft</a>. We’ll use UUIDv7 in our database.</p>
<p>
Externally, in our API and web interface, we would like human-readable Object IDs. The UUID format doesn’t read that well in URIs; <code class=inline>/accounts/0188aadc-f449-7818-8862-5eff12733f64</code>. We can use base62 encoding to shorten it and get rid of the hyphens; <code class=inline>/accounts/02tRrww6GFm4urcMhyQpAS</code>. Object IDs should carry context so we will add prefixes to the IDs: <code class=inline>/accounts/acct_02tRrww6GFm4urcMhyQpAS</code>.</p>
<p>
Why base62? Base62 is just base64URL without the <code class=inline>-</code> and <code class=inline>_</code> characters. We are already using underscore to separate prefixes and IDs and I think hyphens make the ID read worse. With base62 we get a short alphanumeric ID without special characters.</p>
<p>
The Object ID becomes very useful with polymorphic fields and for debugging. We will know what type of resource we’re dealing with by just looking at the ID. There’s much more to this which has been covered in length in the blog post <a href=https://dev.to/stripe/designing-apis-for-humans-object-ids-3o5a>Designing APIs for humans: Object IDs by Paul Asjes</a>.</p>
<p>
Let us continue with the Ecto implementation.</p>
<h2>
Prefixed base62 UUIDv7 in Ecto</h2>
<p>
First, we’ll install the <code class=inline>Uniq</code> library to generate UUIDv7:</p>
<pre><code class="makeup elixir"><span class=c1># mix.exs</span><span class=w>
</span><span class=kd>defmodule</span><span class=w> </span><span class=nc>MyApp.MixProject</span><span class=w> </span><span class=k data-group-id=3004661132-1>do</span><span class=w>
  </span><span class=kn>use</span><span class=w> </span><span class=nc>Mix.Project</span><span class=w>

  </span><span class=c1># ...</span><span class=w>

  </span><span class=kd>def</span><span class=w> </span><span class=nf>deps</span><span class=w> </span><span class=k data-group-id=3004661132-2>do</span><span class=w>
    </span><span class=p data-group-id=3004661132-3>[</span><span class=w>
      </span><span class=c1># ...</span><span class=w>
      </span><span class=p data-group-id=3004661132-4>{</span><span class=ss>:uniq</span><span class=p>,</span><span class=w> </span><span class=s>"~&gt; 0.5.0"</span><span class=p data-group-id=3004661132-4>}</span><span class=w>
    </span><span class=p data-group-id=3004661132-3>]</span><span class=w>
  </span><span class=k data-group-id=3004661132-2>end</span><span class=w>

  </span><span class=c1>#...</span><span class=w>
</span><span class=k data-group-id=3004661132-1>end</span></code></pre>
<p>
Now we’ll set up a custom <code class=inline>Ecto.ParameterizedType</code> module that base62 encodes and prefixes the UUIDs.</p>
<p>
We’ll first set up the <code class=inline>init/1</code> callback to require the prefix. <code class=inline>init/1</code> also gets called on associations, where no extra options like the prefix can be added, so we must differentiate between when it’s the primary key or foreign key.</p>
<p>
<code class=inline>Uniq</code> is initialized with raw UUIDv7 format.</p>
<pre><code class="makeup elixir"><span class=kd>defmodule</span><span class=w> </span><span class=nc>MyApp.PrefixedUUID</span><span class=w> </span><span class=k data-group-id=2813224983-1>do</span><span class=w>
  </span><span class=na>@doc</span><span class=w> </span><span class=s>"""
  Generates prefixed base62 encoded UUIDv7.

  ## Examples

      @primary_key {:id, MyApp.PrefixedUUID, prefix: "acct", autogenerate: true}
      @foreign_key_type MyApp.PrefixedUUID
  """</span><span class=w>
  </span><span class=kn>use</span><span class=w> </span><span class=nc>Ecto.ParameterizedType</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>init</span><span class=p data-group-id=2813224983-2>(</span><span class=n>opts</span><span class=p data-group-id=2813224983-2>)</span><span class=w> </span><span class=k data-group-id=2813224983-3>do</span><span class=w>
    </span><span class=n>schema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>fetch!</span><span class=p data-group-id=2813224983-4>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:schema</span><span class=p data-group-id=2813224983-4>)</span><span class=w>
    </span><span class=n>field</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>fetch!</span><span class=p data-group-id=2813224983-5>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:field</span><span class=p data-group-id=2813224983-5>)</span><span class=w>
    </span><span class=n>uniq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>init</span><span class=p data-group-id=2813224983-6>(</span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w> </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p>,</span><span class=w> </span><span class=ss>version</span><span class=p>:</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=ss>default</span><span class=p>:</span><span class=w> </span><span class=ss>:raw</span><span class=p>,</span><span class=w> </span><span class=ss>dump</span><span class=p>:</span><span class=w> </span><span class=ss>:raw</span><span class=p data-group-id=2813224983-6>)</span><span class=w>

    </span><span class=k>case</span><span class=w> </span><span class=n>opts</span><span class=p data-group-id=2813224983-7>[</span><span class=ss>:primary_key</span><span class=p data-group-id=2813224983-7>]</span><span class=w> </span><span class=k data-group-id=2813224983-8>do</span><span class=w>
      </span><span class=no>true</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
        </span><span class=n>prefix</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>get</span><span class=p data-group-id=2813224983-9>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:prefix</span><span class=p data-group-id=2813224983-9>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=k>raise</span><span class=w> </span><span class=s>"`:prefix` option is required"</span><span class=w>

        </span><span class=p data-group-id=2813224983-10>%{</span><span class=w>
          </span><span class=ss>primary_key</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p>,</span><span class=w>
          </span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w>
          </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=p>,</span><span class=w>
          </span><span class=ss>uniq</span><span class=p>:</span><span class=w> </span><span class=n>uniq</span><span class=w>
        </span><span class=p data-group-id=2813224983-10>}</span><span class=w>

      </span><span class=c>_any</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
        </span><span class=p data-group-id=2813224983-11>%{</span><span class=w>
          </span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w>
          </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p>,</span><span class=w>
          </span><span class=ss>uniq</span><span class=p>:</span><span class=w> </span><span class=n>uniq</span><span class=w>
        </span><span class=p data-group-id=2813224983-11>}</span><span class=w>
    </span><span class=k data-group-id=2813224983-8>end</span><span class=w>
  </span><span class=k data-group-id=2813224983-3>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>type</span><span class=p data-group-id=2813224983-12>(</span><span class=c>_params</span><span class=p data-group-id=2813224983-12>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=ss>:uuid</span><span class=w>

  </span><span class=c1># ...</span><span class=w>
</span><span class=k data-group-id=2813224983-1>end</span></code></pre>
<p>
Next, we’ll implement <code class=inline>cast/2</code> and <code class=inline>dump/3</code> which decodes the slug into the raw UUID. <code class=inline>cast/2</code> gets called on external input (not from the database), and the output will be used for the <code class=inline>dump/3</code> callback. <code class=inline>dump/3</code> is called when we got data to be inserted into the database.</p>
<p>
To decode the slug we first split it into the prefix and encoded components, then decode the encoded UUID. We ensure the prefix matches the module prefix. If we’re dealing with a belongs_to association, we must fetch the prefix option from the related schema module.</p>
<p>
Note that nil is handled as the belongs_to field could be optional.</p>
<pre><code class="makeup elixir"><span class=w>  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>cast</span><span class=p data-group-id=2443770791-1>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=c>_params</span><span class=p data-group-id=2443770791-1>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=p data-group-id=2443770791-2>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=2443770791-2>}</span><span class=w>

  </span><span class=kd>def</span><span class=w> </span><span class=nf>cast</span><span class=p data-group-id=2443770791-3>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=2443770791-3>)</span><span class=w> </span><span class=k data-group-id=2443770791-4>do</span><span class=w>
    </span><span class=k>with</span><span class=w> </span><span class=p data-group-id=2443770791-5>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=c>_uuid</span><span class=p data-group-id=2443770791-5>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>slug_to_uuid</span><span class=p data-group-id=2443770791-6>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=2443770791-6>)</span><span class=p>,</span><span class=w>
         </span><span class=p data-group-id=2443770791-7>{</span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=2443770791-7>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=p data-group-id=2443770791-8>{</span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=2443770791-9>(</span><span class=n>params</span><span class=p data-group-id=2443770791-9>)</span><span class=p data-group-id=2443770791-8>}</span><span class=w> </span><span class=k data-group-id=2443770791-10>do</span><span class=w>
      </span><span class=p data-group-id=2443770791-11>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p data-group-id=2443770791-11>}</span><span class=w>
    </span><span class=k data-group-id=2443770791-10>else</span><span class=w>
      </span><span class=bp>_</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=2443770791-10>end</span><span class=w>
  </span><span class=k data-group-id=2443770791-4>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>slug_to_uuid</span><span class=p data-group-id=2443770791-12>(</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=c>_params</span><span class=p data-group-id=2443770791-12>)</span><span class=w> </span><span class=k data-group-id=2443770791-13>do</span><span class=w>
    </span><span class=k>with</span><span class=w> </span><span class=p data-group-id=2443770791-14>[</span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>slug</span><span class=p data-group-id=2443770791-14>]</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>split</span><span class=p data-group-id=2443770791-15>(</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=s>"_"</span><span class=p data-group-id=2443770791-15>)</span><span class=p>,</span><span class=w>
         </span><span class=p data-group-id=2443770791-16>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=2443770791-16>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>decode_base62_uuid</span><span class=p data-group-id=2443770791-17>(</span><span class=n>slug</span><span class=p data-group-id=2443770791-17>)</span><span class=w> </span><span class=k data-group-id=2443770791-18>do</span><span class=w>
      </span><span class=p data-group-id=2443770791-19>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=2443770791-19>}</span><span class=w>
    </span><span class=k data-group-id=2443770791-18>else</span><span class=w>
      </span><span class=bp>_</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=2443770791-18>end</span><span class=w>
  </span><span class=k data-group-id=2443770791-13>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>prefix</span><span class=p data-group-id=2443770791-20>(</span><span class=p data-group-id=2443770791-21>%{</span><span class=ss>primary_key</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p>,</span><span class=w> </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=2443770791-21>}</span><span class=p data-group-id=2443770791-20>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=w>

  </span><span class=c1># If we deal with a belongs_to assocation we need to fetch the prefix from</span><span class=w>
  </span><span class=c1># the associations schema module</span><span class=w>
  </span><span class=kd>defp</span><span class=w> </span><span class=nf>prefix</span><span class=p data-group-id=2443770791-22>(</span><span class=p data-group-id=2443770791-23>%{</span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w> </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=2443770791-23>}</span><span class=p data-group-id=2443770791-22>)</span><span class=w> </span><span class=k data-group-id=2443770791-24>do</span><span class=w>
    </span><span class=p data-group-id=2443770791-25>%{</span><span class=ss>related</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w> </span><span class=ss>related_key</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=2443770791-25>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>schema</span><span class=o>.</span><span class=c>__schema__</span><span class=p data-group-id=2443770791-26>(</span><span class=ss>:association</span><span class=p>,</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=2443770791-26>)</span><span class=w>
    </span><span class=p data-group-id=2443770791-27>{</span><span class=ss>:parameterized</span><span class=p>,</span><span class=w> </span><span class=bp>__MODULE__</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=2443770791-28>%{</span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=2443770791-28>}</span><span class=p data-group-id=2443770791-27>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>schema</span><span class=o>.</span><span class=c>__schema__</span><span class=p data-group-id=2443770791-29>(</span><span class=ss>:type</span><span class=p>,</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=2443770791-29>)</span><span class=w>

    </span><span class=n>prefix</span><span class=w>
  </span><span class=k data-group-id=2443770791-24>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>dump</span><span class=p data-group-id=2443770791-30>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=bp>_</span><span class=p>,</span><span class=w> </span><span class=bp>_</span><span class=p data-group-id=2443770791-30>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=p data-group-id=2443770791-31>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=2443770791-31>}</span><span class=w>

  </span><span class=kd>def</span><span class=w> </span><span class=nf>dump</span><span class=p data-group-id=2443770791-32>(</span><span class=n>slug</span><span class=p>,</span><span class=w> </span><span class=n>dumper</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=2443770791-32>)</span><span class=w> </span><span class=k data-group-id=2443770791-33>do</span><span class=w>
    </span><span class=k>case</span><span class=w> </span><span class=n>slug_to_uuid</span><span class=p data-group-id=2443770791-34>(</span><span class=n>slug</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=2443770791-34>)</span><span class=w> </span><span class=k data-group-id=2443770791-35>do</span><span class=w>
      </span><span class=p data-group-id=2443770791-36>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=c>_prefix</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=2443770791-36>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2443770791-37>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>dumper</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=2443770791-37>)</span><span class=w>
      </span><span class=ss>:error</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=2443770791-35>end</span><span class=w>
  </span><span class=k data-group-id=2443770791-33>end</span></code></pre>
<p>
Now we’ll implement <code class=inline>load/3</code> and <code class=inline>autogenerate/1</code> that encodes the UUID. <code class=inline>load/3</code> gets called when we get the UUID from the database. Note that nil is handled here again as the belongs_to field could be optional and thus nil in the database.</p>
<p>
<code class=inline>autogenerate/1</code> calls <code class=inline>Uniq</code> to generate a new UUIDv7. To encode the UUID we fetch the prefix and prepend it to the base62 encoded UUID string.</p>
<pre><code class="makeup elixir"><span class=w>  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>load</span><span class=p data-group-id=6799131191-1>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>loader</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6799131191-1>)</span><span class=w> </span><span class=k data-group-id=6799131191-2>do</span><span class=w>
    </span><span class=k>case</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=6799131191-3>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>loader</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6799131191-3>)</span><span class=w> </span><span class=k data-group-id=6799131191-4>do</span><span class=w>
      </span><span class=p data-group-id=6799131191-5>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=6799131191-5>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6799131191-6>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=6799131191-6>}</span><span class=w>
      </span><span class=p data-group-id=6799131191-7>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=6799131191-7>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6799131191-8>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid_to_slug</span><span class=p data-group-id=6799131191-9>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6799131191-9>)</span><span class=p data-group-id=6799131191-8>}</span><span class=w>
      </span><span class=ss>:error</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=6799131191-4>end</span><span class=w>
  </span><span class=k data-group-id=6799131191-2>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>uuid_to_slug</span><span class=p data-group-id=6799131191-10>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6799131191-10>)</span><span class=w> </span><span class=k data-group-id=6799131191-11>do</span><span class=w>
    </span><span class=s>"</span><span class=si data-group-id=6799131191-12>#{</span><span class=n>prefix</span><span class=p data-group-id=6799131191-13>(</span><span class=n>params</span><span class=p data-group-id=6799131191-13>)</span><span class=si data-group-id=6799131191-12>}</span><span class=s>_</span><span class=si data-group-id=6799131191-14>#{</span><span class=n>encode_base62_uuid</span><span class=p data-group-id=6799131191-15>(</span><span class=n>uuid</span><span class=p data-group-id=6799131191-15>)</span><span class=si data-group-id=6799131191-14>}</span><span class=s>"</span><span class=w>
  </span><span class=k data-group-id=6799131191-11>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>autogenerate</span><span class=p data-group-id=6799131191-16>(</span><span class=n>params</span><span class=p data-group-id=6799131191-16>)</span><span class=w> </span><span class=k data-group-id=6799131191-17>do</span><span class=w>
    </span><span class=n>uuid_to_slug</span><span class=p data-group-id=6799131191-18>(</span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>autogenerate</span><span class=p data-group-id=6799131191-19>(</span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6799131191-19>)</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6799131191-18>)</span><span class=w>
  </span><span class=k data-group-id=6799131191-17>end</span></code></pre>
<p>
Now we got prefixed base62 encoded UUIDv7 working! All that’s left is to implement the base62 encoder/decoder (<code class=inline>encode_base62_uuid/1</code> and <code class=inline>decode_base62_uuid/1</code>). </p>
<p>
Let’s put it all together and then implement it into our app. Here, we got the complete module and test module:</p>
<pre><code class="makeup elixir"><span class=kd>defmodule</span><span class=w> </span><span class=nc>MyApp.PrefixedUUID</span><span class=w> </span><span class=k data-group-id=6116757647-1>do</span><span class=w>
  </span><span class=na>@doc</span><span class=w> </span><span class=s>"""
  Generates prefixed base62 encoded UUIDv7.

  ## Examples

      @primary_key {:id, MyApp.PrefixedUUID, prefix: "acct", autogenerate: true}
      @foreign_key_type MyApp.PrefixedUUID
  """</span><span class=w>
  </span><span class=kn>use</span><span class=w> </span><span class=nc>Ecto.ParameterizedType</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>init</span><span class=p data-group-id=6116757647-2>(</span><span class=n>opts</span><span class=p data-group-id=6116757647-2>)</span><span class=w> </span><span class=k data-group-id=6116757647-3>do</span><span class=w>
    </span><span class=n>schema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>fetch!</span><span class=p data-group-id=6116757647-4>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:schema</span><span class=p data-group-id=6116757647-4>)</span><span class=w>
    </span><span class=n>field</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>fetch!</span><span class=p data-group-id=6116757647-5>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:field</span><span class=p data-group-id=6116757647-5>)</span><span class=w>
    </span><span class=n>uniq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>init</span><span class=p data-group-id=6116757647-6>(</span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w> </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p>,</span><span class=w> </span><span class=ss>version</span><span class=p>:</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=ss>default</span><span class=p>:</span><span class=w> </span><span class=ss>:raw</span><span class=p>,</span><span class=w> </span><span class=ss>dump</span><span class=p>:</span><span class=w> </span><span class=ss>:raw</span><span class=p data-group-id=6116757647-6>)</span><span class=w>

    </span><span class=k>case</span><span class=w> </span><span class=n>opts</span><span class=p data-group-id=6116757647-7>[</span><span class=ss>:primary_key</span><span class=p data-group-id=6116757647-7>]</span><span class=w> </span><span class=k data-group-id=6116757647-8>do</span><span class=w>
      </span><span class=no>true</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
        </span><span class=n>prefix</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>get</span><span class=p data-group-id=6116757647-9>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:prefix</span><span class=p data-group-id=6116757647-9>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=k>raise</span><span class=w> </span><span class=s>"`:prefix` option is required"</span><span class=w>

        </span><span class=p data-group-id=6116757647-10>%{</span><span class=w>
          </span><span class=ss>primary_key</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p>,</span><span class=w>
          </span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w>
          </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=p>,</span><span class=w>
          </span><span class=ss>uniq</span><span class=p>:</span><span class=w> </span><span class=n>uniq</span><span class=w>
        </span><span class=p data-group-id=6116757647-10>}</span><span class=w>

      </span><span class=c>_any</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
        </span><span class=p data-group-id=6116757647-11>%{</span><span class=w>
          </span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w>
          </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p>,</span><span class=w>
          </span><span class=ss>uniq</span><span class=p>:</span><span class=w> </span><span class=n>uniq</span><span class=w>
        </span><span class=p data-group-id=6116757647-11>}</span><span class=w>
    </span><span class=k data-group-id=6116757647-8>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-3>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>type</span><span class=p data-group-id=6116757647-12>(</span><span class=c>_params</span><span class=p data-group-id=6116757647-12>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=ss>:uuid</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>cast</span><span class=p data-group-id=6116757647-13>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=c>_params</span><span class=p data-group-id=6116757647-13>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=p data-group-id=6116757647-14>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=6116757647-14>}</span><span class=w>

  </span><span class=kd>def</span><span class=w> </span><span class=nf>cast</span><span class=p data-group-id=6116757647-15>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-15>)</span><span class=w> </span><span class=k data-group-id=6116757647-16>do</span><span class=w>
    </span><span class=k>with</span><span class=w> </span><span class=p data-group-id=6116757647-17>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=c>_uuid</span><span class=p data-group-id=6116757647-17>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>slug_to_uuid</span><span class=p data-group-id=6116757647-18>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-18>)</span><span class=p>,</span><span class=w>
         </span><span class=p data-group-id=6116757647-19>{</span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=6116757647-19>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=p data-group-id=6116757647-20>{</span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=6116757647-21>(</span><span class=n>params</span><span class=p data-group-id=6116757647-21>)</span><span class=p data-group-id=6116757647-20>}</span><span class=w> </span><span class=k data-group-id=6116757647-22>do</span><span class=w>
      </span><span class=p data-group-id=6116757647-23>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p data-group-id=6116757647-23>}</span><span class=w>
    </span><span class=k data-group-id=6116757647-22>else</span><span class=w>
      </span><span class=bp>_</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=6116757647-22>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-16>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>slug_to_uuid</span><span class=p data-group-id=6116757647-24>(</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=c>_params</span><span class=p data-group-id=6116757647-24>)</span><span class=w> </span><span class=k data-group-id=6116757647-25>do</span><span class=w>
    </span><span class=k>with</span><span class=w> </span><span class=p data-group-id=6116757647-26>[</span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>slug</span><span class=p data-group-id=6116757647-26>]</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>split</span><span class=p data-group-id=6116757647-27>(</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=s>"_"</span><span class=p data-group-id=6116757647-27>)</span><span class=p>,</span><span class=w>
         </span><span class=p data-group-id=6116757647-28>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=6116757647-28>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>decode_base62_uuid</span><span class=p data-group-id=6116757647-29>(</span><span class=n>slug</span><span class=p data-group-id=6116757647-29>)</span><span class=w> </span><span class=k data-group-id=6116757647-30>do</span><span class=w>
      </span><span class=p data-group-id=6116757647-31>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>prefix</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=6116757647-31>}</span><span class=w>
    </span><span class=k data-group-id=6116757647-30>else</span><span class=w>
      </span><span class=bp>_</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=6116757647-30>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-25>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>prefix</span><span class=p data-group-id=6116757647-32>(</span><span class=p data-group-id=6116757647-33>%{</span><span class=ss>primary_key</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p>,</span><span class=w> </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=6116757647-33>}</span><span class=p data-group-id=6116757647-32>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=w>

  </span><span class=c1># If we deal with a belongs_to assocation we need to fetch the prefix from</span><span class=w>
  </span><span class=c1># the associations schema module</span><span class=w>
  </span><span class=kd>defp</span><span class=w> </span><span class=nf>prefix</span><span class=p data-group-id=6116757647-34>(</span><span class=p data-group-id=6116757647-35>%{</span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w> </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=6116757647-35>}</span><span class=p data-group-id=6116757647-34>)</span><span class=w> </span><span class=k data-group-id=6116757647-36>do</span><span class=w>
    </span><span class=p data-group-id=6116757647-37>%{</span><span class=ss>related</span><span class=p>:</span><span class=w> </span><span class=n>schema</span><span class=p>,</span><span class=w> </span><span class=ss>related_key</span><span class=p>:</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=6116757647-37>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>schema</span><span class=o>.</span><span class=c>__schema__</span><span class=p data-group-id=6116757647-38>(</span><span class=ss>:association</span><span class=p>,</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=6116757647-38>)</span><span class=w>
    </span><span class=p data-group-id=6116757647-39>{</span><span class=ss>:parameterized</span><span class=p>,</span><span class=w> </span><span class=bp>__MODULE__</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-40>%{</span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=n>prefix</span><span class=p data-group-id=6116757647-40>}</span><span class=p data-group-id=6116757647-39>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>schema</span><span class=o>.</span><span class=c>__schema__</span><span class=p data-group-id=6116757647-41>(</span><span class=ss>:type</span><span class=p>,</span><span class=w> </span><span class=n>field</span><span class=p data-group-id=6116757647-41>)</span><span class=w>

    </span><span class=n>prefix</span><span class=w>
  </span><span class=k data-group-id=6116757647-36>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>load</span><span class=p data-group-id=6116757647-42>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>loader</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-42>)</span><span class=w> </span><span class=k data-group-id=6116757647-43>do</span><span class=w>
    </span><span class=k>case</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=6116757647-44>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>loader</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6116757647-44>)</span><span class=w> </span><span class=k data-group-id=6116757647-45>do</span><span class=w>
      </span><span class=p data-group-id=6116757647-46>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=6116757647-46>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6116757647-47>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=6116757647-47>}</span><span class=w>
      </span><span class=p data-group-id=6116757647-48>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=6116757647-48>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6116757647-49>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid_to_slug</span><span class=p data-group-id=6116757647-50>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-50>)</span><span class=p data-group-id=6116757647-49>}</span><span class=w>
      </span><span class=ss>:error</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=6116757647-45>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-43>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>uuid_to_slug</span><span class=p data-group-id=6116757647-51>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-51>)</span><span class=w> </span><span class=k data-group-id=6116757647-52>do</span><span class=w>
    </span><span class=s>"</span><span class=si data-group-id=6116757647-53>#{</span><span class=n>prefix</span><span class=p data-group-id=6116757647-54>(</span><span class=n>params</span><span class=p data-group-id=6116757647-54>)</span><span class=si data-group-id=6116757647-53>}</span><span class=s>_</span><span class=si data-group-id=6116757647-55>#{</span><span class=n>encode_base62_uuid</span><span class=p data-group-id=6116757647-56>(</span><span class=n>uuid</span><span class=p data-group-id=6116757647-56>)</span><span class=si data-group-id=6116757647-55>}</span><span class=s>"</span><span class=w>
  </span><span class=k data-group-id=6116757647-52>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>dump</span><span class=p data-group-id=6116757647-57>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=bp>_</span><span class=p>,</span><span class=w> </span><span class=bp>_</span><span class=p data-group-id=6116757647-57>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=p data-group-id=6116757647-58>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=6116757647-58>}</span><span class=w>

  </span><span class=kd>def</span><span class=w> </span><span class=nf>dump</span><span class=p data-group-id=6116757647-59>(</span><span class=n>slug</span><span class=p>,</span><span class=w> </span><span class=n>dumper</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-59>)</span><span class=w> </span><span class=k data-group-id=6116757647-60>do</span><span class=w>
    </span><span class=k>case</span><span class=w> </span><span class=n>slug_to_uuid</span><span class=p data-group-id=6116757647-61>(</span><span class=n>slug</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-61>)</span><span class=w> </span><span class=k data-group-id=6116757647-62>do</span><span class=w>
      </span><span class=p data-group-id=6116757647-63>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=c>_prefix</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=6116757647-63>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=6116757647-64>(</span><span class=n>uuid</span><span class=p>,</span><span class=w> </span><span class=n>dumper</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6116757647-64>)</span><span class=w>
      </span><span class=ss>:error</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=k data-group-id=6116757647-62>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-60>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>autogenerate</span><span class=p data-group-id=6116757647-65>(</span><span class=n>params</span><span class=p data-group-id=6116757647-65>)</span><span class=w> </span><span class=k data-group-id=6116757647-66>do</span><span class=w>
    </span><span class=n>uuid_to_slug</span><span class=p data-group-id=6116757647-67>(</span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>autogenerate</span><span class=p data-group-id=6116757647-68>(</span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6116757647-68>)</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-67>)</span><span class=w>
  </span><span class=k data-group-id=6116757647-66>end</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>embed_as</span><span class=p data-group-id=6116757647-69>(</span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-69>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>embed_as</span><span class=p data-group-id=6116757647-70>(</span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6116757647-70>)</span><span class=w>

  </span><span class=na>@impl</span><span class=w> </span><span class=no>true</span><span class=w>
  </span><span class=kd>def</span><span class=w> </span><span class=nf>equal?</span><span class=p data-group-id=6116757647-71>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=p data-group-id=6116757647-71>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=o>.</span><span class=n>equal?</span><span class=p data-group-id=6116757647-72>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>params</span><span class=o>.</span><span class=n>uniq</span><span class=p data-group-id=6116757647-72>)</span><span class=w>

  </span><span class=c1># UUID Base62 encoder/decoder</span><span class=w>

  </span><span class=na>@base62_uuid_length</span><span class=w> </span><span class=mi>22</span><span class=w>
  </span><span class=na>@uuid_length</span><span class=w> </span><span class=mi>32</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>encode_base62_uuid</span><span class=p data-group-id=6116757647-73>(</span><span class=n>uuid</span><span class=p data-group-id=6116757647-73>)</span><span class=w> </span><span class=k data-group-id=6116757647-74>do</span><span class=w>
    </span><span class=n>uuid</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>replace</span><span class=p data-group-id=6116757647-75>(</span><span class=s>"-"</span><span class=p>,</span><span class=w> </span><span class=s>""</span><span class=p data-group-id=6116757647-75>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>to_integer</span><span class=p data-group-id=6116757647-76>(</span><span class=mi>16</span><span class=p data-group-id=6116757647-76>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=n>base62_encode</span><span class=p data-group-id=6116757647-77>(</span><span class=p data-group-id=6116757647-77>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>pad_leading</span><span class=p data-group-id=6116757647-78>(</span><span class=na>@base62_uuid_length</span><span class=p>,</span><span class=w> </span><span class=s>"0"</span><span class=p data-group-id=6116757647-78>)</span><span class=w>
  </span><span class=k data-group-id=6116757647-74>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>decode_base62_uuid</span><span class=p data-group-id=6116757647-79>(</span><span class=n>string</span><span class=p data-group-id=6116757647-79>)</span><span class=w> </span><span class=k data-group-id=6116757647-80>do</span><span class=w>
    </span><span class=k>with</span><span class=w> </span><span class=p data-group-id=6116757647-81>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>number</span><span class=p data-group-id=6116757647-81>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>base62_decode</span><span class=p data-group-id=6116757647-82>(</span><span class=n>string</span><span class=p data-group-id=6116757647-82>)</span><span class=w> </span><span class=k data-group-id=6116757647-83>do</span><span class=w>
      </span><span class=n>number_to_uuid</span><span class=p data-group-id=6116757647-84>(</span><span class=n>number</span><span class=p data-group-id=6116757647-84>)</span><span class=w>
    </span><span class=k data-group-id=6116757647-83>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-80>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>number_to_uuid</span><span class=p data-group-id=6116757647-85>(</span><span class=n>number</span><span class=p data-group-id=6116757647-85>)</span><span class=w> </span><span class=k data-group-id=6116757647-86>do</span><span class=w>
    </span><span class=n>number</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>Integer</span><span class=o>.</span><span class=n>to_string</span><span class=p data-group-id=6116757647-87>(</span><span class=mi>16</span><span class=p data-group-id=6116757647-87>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>downcase</span><span class=p data-group-id=6116757647-88>(</span><span class=p data-group-id=6116757647-88>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>pad_leading</span><span class=p data-group-id=6116757647-89>(</span><span class=na>@uuid_length</span><span class=p>,</span><span class=w> </span><span class=s>"0"</span><span class=p data-group-id=6116757647-89>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=k data-group-id=6116757647-90>do</span><span class=w>
      </span><span class=p data-group-id=6116757647-91>&lt;&lt;</span><span class=n>g1</span><span class=o>::</span><span class=n>binary</span><span class=o>-</span><span class=n>size</span><span class=p data-group-id=6116757647-92>(</span><span class=mi>8</span><span class=p data-group-id=6116757647-92>)</span><span class=p>,</span><span class=w> </span><span class=n>g2</span><span class=o>::</span><span class=n>binary</span><span class=o>-</span><span class=n>size</span><span class=p data-group-id=6116757647-93>(</span><span class=mi>4</span><span class=p data-group-id=6116757647-93>)</span><span class=p>,</span><span class=w> </span><span class=n>g3</span><span class=o>::</span><span class=n>binary</span><span class=o>-</span><span class=n>size</span><span class=p data-group-id=6116757647-94>(</span><span class=mi>4</span><span class=p data-group-id=6116757647-94>)</span><span class=p>,</span><span class=w> </span><span class=n>g4</span><span class=o>::</span><span class=n>binary</span><span class=o>-</span><span class=n>size</span><span class=p data-group-id=6116757647-95>(</span><span class=mi>4</span><span class=p data-group-id=6116757647-95>)</span><span class=p>,</span><span class=w> </span><span class=n>g5</span><span class=o>::</span><span class=n>binary</span><span class=o>-</span><span class=n>size</span><span class=p data-group-id=6116757647-96>(</span><span class=mi>12</span><span class=p data-group-id=6116757647-96>)</span><span class=p data-group-id=6116757647-91>&gt;&gt;</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
        </span><span class=p data-group-id=6116757647-97>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=s>"</span><span class=si data-group-id=6116757647-98>#{</span><span class=n>g1</span><span class=si data-group-id=6116757647-98>}</span><span class=s>-</span><span class=si data-group-id=6116757647-99>#{</span><span class=n>g2</span><span class=si data-group-id=6116757647-99>}</span><span class=s>-</span><span class=si data-group-id=6116757647-100>#{</span><span class=n>g3</span><span class=si data-group-id=6116757647-100>}</span><span class=s>-</span><span class=si data-group-id=6116757647-101>#{</span><span class=n>g4</span><span class=si data-group-id=6116757647-101>}</span><span class=s>-</span><span class=si data-group-id=6116757647-102>#{</span><span class=n>g5</span><span class=si data-group-id=6116757647-102>}</span><span class=s>"</span><span class=p data-group-id=6116757647-97>}</span><span class=w>

      </span><span class=n>other</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
        </span><span class=p data-group-id=6116757647-103>{</span><span class=ss>:error</span><span class=p>,</span><span class=w> </span><span class=s>"got invalid base62 uuid; </span><span class=si data-group-id=6116757647-104>#{</span><span class=n>inspect</span><span class=w> </span><span class=n>other</span><span class=si data-group-id=6116757647-104>}</span><span class=s>"</span><span class=p data-group-id=6116757647-103>}</span><span class=w>
    </span><span class=k data-group-id=6116757647-90>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-86>end</span><span class=w>

  </span><span class=c1># Base62 encoder/decoder</span><span class=w>

  </span><span class=na>@base62_alphabet</span><span class=w> </span><span class=sc>'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span><span class=w>

  </span><span class=k>for</span><span class=w> </span><span class=p data-group-id=6116757647-105>{</span><span class=n>digit</span><span class=p>,</span><span class=w> </span><span class=n>idx</span><span class=p data-group-id=6116757647-105>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nc>Enum</span><span class=o>.</span><span class=n>with_index</span><span class=p data-group-id=6116757647-106>(</span><span class=na>@base62_alphabet</span><span class=p data-group-id=6116757647-106>)</span><span class=w> </span><span class=k data-group-id=6116757647-107>do</span><span class=w>
    </span><span class=kd>defp</span><span class=w> </span><span class=nf>base62_encode</span><span class=p data-group-id=6116757647-108>(</span><span class=k>unquote</span><span class=p data-group-id=6116757647-109>(</span><span class=n>idx</span><span class=p data-group-id=6116757647-109>)</span><span class=p data-group-id=6116757647-108>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=k>unquote</span><span class=p data-group-id=6116757647-110>(</span><span class=p data-group-id=6116757647-111>&lt;&lt;</span><span class=n>digit</span><span class=p data-group-id=6116757647-111>&gt;&gt;</span><span class=p data-group-id=6116757647-110>)</span><span class=w>
  </span><span class=k data-group-id=6116757647-107>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>base62_encode</span><span class=p data-group-id=6116757647-112>(</span><span class=n>number</span><span class=p data-group-id=6116757647-112>)</span><span class=w> </span><span class=k data-group-id=6116757647-113>do</span><span class=w>
    </span><span class=n>base62_encode</span><span class=p data-group-id=6116757647-114>(</span><span class=n>div</span><span class=p data-group-id=6116757647-115>(</span><span class=n>number</span><span class=p>,</span><span class=w> </span><span class=k>unquote</span><span class=p data-group-id=6116757647-116>(</span><span class=n>length</span><span class=p data-group-id=6116757647-117>(</span><span class=na>@base62_alphabet</span><span class=p data-group-id=6116757647-117>)</span><span class=p data-group-id=6116757647-116>)</span><span class=p data-group-id=6116757647-115>)</span><span class=p data-group-id=6116757647-114>)</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w>
      </span><span class=n>base62_encode</span><span class=p data-group-id=6116757647-118>(</span><span class=n>rem</span><span class=p data-group-id=6116757647-119>(</span><span class=n>number</span><span class=p>,</span><span class=w> </span><span class=k>unquote</span><span class=p data-group-id=6116757647-120>(</span><span class=n>length</span><span class=p data-group-id=6116757647-121>(</span><span class=na>@base62_alphabet</span><span class=p data-group-id=6116757647-121>)</span><span class=p data-group-id=6116757647-120>)</span><span class=p data-group-id=6116757647-119>)</span><span class=p data-group-id=6116757647-118>)</span><span class=w>
  </span><span class=k data-group-id=6116757647-113>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>base62_decode</span><span class=p data-group-id=6116757647-122>(</span><span class=n>string</span><span class=p data-group-id=6116757647-122>)</span><span class=w> </span><span class=k data-group-id=6116757647-123>do</span><span class=w>
    </span><span class=n>string</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>split</span><span class=p data-group-id=6116757647-124>(</span><span class=s>""</span><span class=p>,</span><span class=w> </span><span class=ss>trim</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p data-group-id=6116757647-124>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>Enum</span><span class=o>.</span><span class=n>reverse</span><span class=p data-group-id=6116757647-125>(</span><span class=p data-group-id=6116757647-125>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=nc>Enum</span><span class=o>.</span><span class=n>reduce_while</span><span class=p data-group-id=6116757647-126>(</span><span class=p data-group-id=6116757647-127>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-128>{</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p data-group-id=6116757647-128>}</span><span class=p data-group-id=6116757647-127>}</span><span class=p>,</span><span class=w> </span><span class=k data-group-id=6116757647-129>fn</span><span class=w> </span><span class=n>char</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-130>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-131>{</span><span class=n>acc</span><span class=p>,</span><span class=w> </span><span class=n>step</span><span class=p data-group-id=6116757647-131>}</span><span class=p data-group-id=6116757647-130>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
      </span><span class=k>case</span><span class=w> </span><span class=n>decode_base62_char</span><span class=p data-group-id=6116757647-132>(</span><span class=n>char</span><span class=p data-group-id=6116757647-132>)</span><span class=w> </span><span class=k data-group-id=6116757647-133>do</span><span class=w>
        </span><span class=p data-group-id=6116757647-134>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>number</span><span class=p data-group-id=6116757647-134>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6116757647-135>{</span><span class=ss>:cont</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-136>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-137>{</span><span class=n>acc</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>number</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nc>Integer</span><span class=o>.</span><span class=n>pow</span><span class=p data-group-id=6116757647-138>(</span><span class=k>unquote</span><span class=p data-group-id=6116757647-139>(</span><span class=n>length</span><span class=p data-group-id=6116757647-140>(</span><span class=na>@base62_alphabet</span><span class=p data-group-id=6116757647-140>)</span><span class=p data-group-id=6116757647-139>)</span><span class=p>,</span><span class=w> </span><span class=n>step</span><span class=p data-group-id=6116757647-138>)</span><span class=p>,</span><span class=w> </span><span class=n>step</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p data-group-id=6116757647-137>}</span><span class=p data-group-id=6116757647-136>}</span><span class=p data-group-id=6116757647-135>}</span><span class=w>
        </span><span class=p data-group-id=6116757647-141>{</span><span class=ss>:error</span><span class=p>,</span><span class=w> </span><span class=n>error</span><span class=p data-group-id=6116757647-141>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6116757647-142>{</span><span class=ss>:halt</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-143>{</span><span class=ss>:error</span><span class=p>,</span><span class=w> </span><span class=n>error</span><span class=p data-group-id=6116757647-143>}</span><span class=p data-group-id=6116757647-142>}</span><span class=w>
      </span><span class=k data-group-id=6116757647-133>end</span><span class=w>
    </span><span class=k data-group-id=6116757647-129>end</span><span class=p data-group-id=6116757647-126>)</span><span class=w>
    </span><span class=o>|&gt;</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=k data-group-id=6116757647-144>do</span><span class=w>
      </span><span class=p data-group-id=6116757647-145>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=6116757647-146>{</span><span class=n>number</span><span class=p>,</span><span class=w> </span><span class=c>_step</span><span class=p data-group-id=6116757647-146>}</span><span class=p data-group-id=6116757647-145>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6116757647-147>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>number</span><span class=p data-group-id=6116757647-147>}</span><span class=w>
      </span><span class=p data-group-id=6116757647-148>{</span><span class=ss>:error</span><span class=p>,</span><span class=w> </span><span class=n>error</span><span class=p data-group-id=6116757647-148>}</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p data-group-id=6116757647-149>{</span><span class=ss>:error</span><span class=p>,</span><span class=w> </span><span class=n>error</span><span class=p data-group-id=6116757647-149>}</span><span class=w>
    </span><span class=k data-group-id=6116757647-144>end</span><span class=w>
  </span><span class=k data-group-id=6116757647-123>end</span><span class=w>

  </span><span class=k>for</span><span class=w> </span><span class=p data-group-id=6116757647-150>{</span><span class=n>digit</span><span class=p>,</span><span class=w> </span><span class=n>idx</span><span class=p data-group-id=6116757647-150>}</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nc>Enum</span><span class=o>.</span><span class=n>with_index</span><span class=p data-group-id=6116757647-151>(</span><span class=na>@base62_alphabet</span><span class=p data-group-id=6116757647-151>)</span><span class=w> </span><span class=k data-group-id=6116757647-152>do</span><span class=w>
    </span><span class=kd>defp</span><span class=w> </span><span class=nf>decode_base62_char</span><span class=p data-group-id=6116757647-153>(</span><span class=k>unquote</span><span class=p data-group-id=6116757647-154>(</span><span class=p data-group-id=6116757647-155>&lt;&lt;</span><span class=n>digit</span><span class=p data-group-id=6116757647-155>&gt;&gt;</span><span class=p data-group-id=6116757647-154>)</span><span class=p data-group-id=6116757647-153>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=p data-group-id=6116757647-156>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=k>unquote</span><span class=p data-group-id=6116757647-157>(</span><span class=n>idx</span><span class=p data-group-id=6116757647-157>)</span><span class=p data-group-id=6116757647-156>}</span><span class=w>
  </span><span class=k data-group-id=6116757647-152>end</span><span class=w>

  </span><span class=kd>defp</span><span class=w> </span><span class=nf>decode_base62_char</span><span class=p data-group-id=6116757647-158>(</span><span class=n>char</span><span class=p data-group-id=6116757647-158>)</span><span class=p>,</span><span class=w> </span><span class=ss>do</span><span class=p>:</span><span class=w> </span><span class=p data-group-id=6116757647-159>{</span><span class=ss>:error</span><span class=p>,</span><span class=w> </span><span class=s>"got invalid base62 character; </span><span class=si data-group-id=6116757647-160>#{</span><span class=n>inspect</span><span class=w> </span><span class=n>char</span><span class=si data-group-id=6116757647-160>}</span><span class=s>"</span><span class=p data-group-id=6116757647-159>}</span><span class=w>
</span><span class=k data-group-id=6116757647-1>end</span></code></pre>
<pre><code class="makeup elixir"><span class=kd>defmodule</span><span class=w> </span><span class=nc>MyApp.PrefixedUUIDTest</span><span class=w> </span><span class=k data-group-id=2879120019-1>do</span><span class=w>
  </span><span class=kn>use</span><span class=w> </span><span class=nc>MyApp.DataCase</span><span class=w>

  </span><span class=kn>alias</span><span class=w> </span><span class=nc>MyApp.PrefixedUUID</span><span class=w>
  </span><span class=kn>alias</span><span class=w> </span><span class=nc>Uniq.UUID</span><span class=w>

  </span><span class=kd>defmodule</span><span class=w> </span><span class=nc>TestSchema</span><span class=w> </span><span class=k data-group-id=2879120019-2>do</span><span class=w>
    </span><span class=kn>use</span><span class=w> </span><span class=nc>Ecto.Schema</span><span class=w>

    </span><span class=na>@primary_key</span><span class=w> </span><span class=p data-group-id=2879120019-3>{</span><span class=ss>:id</span><span class=p>,</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=p>,</span><span class=w> </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=s>"test"</span><span class=p>,</span><span class=w> </span><span class=ss>autogenerate</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p data-group-id=2879120019-3>}</span><span class=w>
    </span><span class=na>@foreign_key_type</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=w>

    </span><span class=n>schema</span><span class=w> </span><span class=s>"test"</span><span class=w> </span><span class=k data-group-id=2879120019-4>do</span><span class=w>
      </span><span class=n>belongs_to</span><span class=w> </span><span class=ss>:test</span><span class=p>,</span><span class=w> </span><span class=nc>TestSchema</span><span class=w>
    </span><span class=k data-group-id=2879120019-4>end</span><span class=w>
  </span><span class=k data-group-id=2879120019-2>end</span><span class=w>

  </span><span class=na>@params</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>init</span><span class=p data-group-id=2879120019-5>(</span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=nc>TestSchema</span><span class=p>,</span><span class=w> </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=ss>:id</span><span class=p>,</span><span class=w> </span><span class=ss>primary_key</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p>,</span><span class=w> </span><span class=ss>autogenerate</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p>,</span><span class=w> </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=s>"test"</span><span class=p data-group-id=2879120019-5>)</span><span class=w>
  </span><span class=na>@belongs_to_params</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>init</span><span class=p data-group-id=2879120019-6>(</span><span class=ss>schema</span><span class=p>:</span><span class=w> </span><span class=nc>TestSchema</span><span class=p>,</span><span class=w> </span><span class=ss>field</span><span class=p>:</span><span class=w> </span><span class=ss>:test</span><span class=p>,</span><span class=w> </span><span class=ss>foreign_key</span><span class=p>:</span><span class=w> </span><span class=ss>:test_id</span><span class=p data-group-id=2879120019-6>)</span><span class=w>
  </span><span class=na>@loader</span><span class=w> </span><span class=no>nil</span><span class=w>
  </span><span class=na>@dumper</span><span class=w> </span><span class=no>nil</span><span class=w>

  </span><span class=na>@test_prefixed_uuid</span><span class=w> </span><span class=s>"test_3TUIKuXX5mNO2jSA41bsDx"</span><span class=w>
  </span><span class=na>@test_uuid</span><span class=w> </span><span class=nc>UUID</span><span class=o>.</span><span class=n>to_string</span><span class=p data-group-id=2879120019-7>(</span><span class=s>"7232b37d-fc13-44c0-8e1b-9a5a07e24921"</span><span class=p>,</span><span class=w> </span><span class=ss>:raw</span><span class=p data-group-id=2879120019-7>)</span><span class=w>
  </span><span class=na>@test_prefixed_uuid_with_leading_zero</span><span class=w> </span><span class=s>"test_02tREKF6r6OCO2sdSjpyTm"</span><span class=w>
  </span><span class=na>@test_uuid_with_leading_zero</span><span class=w> </span><span class=nc>UUID</span><span class=o>.</span><span class=n>to_string</span><span class=p data-group-id=2879120019-8>(</span><span class=s>"0188a516-bc8c-7c5a-9b68-12651f558b9e"</span><span class=p>,</span><span class=w> </span><span class=ss>:raw</span><span class=p data-group-id=2879120019-8>)</span><span class=w>
  </span><span class=na>@test_prefixed_uuid_null</span><span class=w> </span><span class=s>"test_0000000000000000000000"</span><span class=w>
  </span><span class=na>@test_uuid_null</span><span class=w> </span><span class=nc>UUID</span><span class=o>.</span><span class=n>to_string</span><span class=p data-group-id=2879120019-9>(</span><span class=s>"00000000-0000-0000-0000-000000000000"</span><span class=p>,</span><span class=w> </span><span class=ss>:raw</span><span class=p data-group-id=2879120019-9>)</span><span class=w>
  </span><span class=na>@test_prefixed_uuid_invalid_characters</span><span class=w> </span><span class=s>"test_"</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>duplicate</span><span class=p data-group-id=2879120019-10>(</span><span class=s>"."</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p data-group-id=2879120019-10>)</span><span class=w>
  </span><span class=na>@test_uuid_invalid_characters</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>duplicate</span><span class=p data-group-id=2879120019-11>(</span><span class=s>"."</span><span class=p>,</span><span class=w> </span><span class=mi>22</span><span class=p data-group-id=2879120019-11>)</span><span class=w>
  </span><span class=na>@test_prefixed_uuid_invalid_format</span><span class=w> </span><span class=s>"test_"</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>duplicate</span><span class=p data-group-id=2879120019-12>(</span><span class=s>"x"</span><span class=p>,</span><span class=w> </span><span class=mi>31</span><span class=p data-group-id=2879120019-12>)</span><span class=w>
  </span><span class=na>@test_uuid_invalid_format</span><span class=w> </span><span class=nc>String</span><span class=o>.</span><span class=n>duplicate</span><span class=p data-group-id=2879120019-13>(</span><span class=s>"x"</span><span class=p>,</span><span class=w> </span><span class=mi>21</span><span class=p data-group-id=2879120019-13>)</span><span class=w>

  </span><span class=n>test</span><span class=w> </span><span class=s>"cast/2"</span><span class=w> </span><span class=k data-group-id=2879120019-14>do</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-15>(</span><span class=na>@test_prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-15>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-16>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid</span><span class=p data-group-id=2879120019-16>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-17>(</span><span class=na>@test_prefixed_uuid_with_leading_zero</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-17>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-18>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid_with_leading_zero</span><span class=p data-group-id=2879120019-18>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-19>(</span><span class=na>@test_prefixed_uuid_null</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-19>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-20>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid_null</span><span class=p data-group-id=2879120019-20>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-21>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-21>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-22>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=2879120019-22>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-23>(</span><span class=s>"otherprefix"</span><span class=w> </span><span class=o>&lt;&gt;</span><span class=w> </span><span class=na>@test_prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-23>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-24>(</span><span class=na>@test_prefixed_uuid_invalid_characters</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-24>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-25>(</span><span class=na>@test_prefixed_uuid_invalid_format</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-25>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>cast</span><span class=p data-group-id=2879120019-26>(</span><span class=na>@test_prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@belongs_to_params</span><span class=p data-group-id=2879120019-26>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-27>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid</span><span class=p data-group-id=2879120019-27>}</span><span class=w>
  </span><span class=k data-group-id=2879120019-14>end</span><span class=w>

  </span><span class=n>test</span><span class=w> </span><span class=s>"load/3"</span><span class=w> </span><span class=k data-group-id=2879120019-28>do</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-29>(</span><span class=na>@test_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-29>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-30>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid</span><span class=p data-group-id=2879120019-30>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-31>(</span><span class=na>@test_uuid_with_leading_zero</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-31>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-32>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid_with_leading_zero</span><span class=p data-group-id=2879120019-32>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-33>(</span><span class=na>@test_uuid_null</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-33>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-34>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid_null</span><span class=p data-group-id=2879120019-34>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-35>(</span><span class=na>@test_uuid_invalid_characters</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-35>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-36>(</span><span class=na>@test_uuid_invalid_format</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-36>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-37>(</span><span class=na>@test_prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-37>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-38>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-38>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-39>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=2879120019-39>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>load</span><span class=p data-group-id=2879120019-40>(</span><span class=na>@test_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@loader</span><span class=p>,</span><span class=w> </span><span class=na>@belongs_to_params</span><span class=p data-group-id=2879120019-40>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-41>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_prefixed_uuid</span><span class=p data-group-id=2879120019-41>}</span><span class=w>
  </span><span class=k data-group-id=2879120019-28>end</span><span class=w>

  </span><span class=n>test</span><span class=w> </span><span class=s>"dump/3"</span><span class=w> </span><span class=k data-group-id=2879120019-42>do</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-43>(</span><span class=na>@test_prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@dumper</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-43>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-44>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_uuid</span><span class=p data-group-id=2879120019-44>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-45>(</span><span class=na>@test_prefixed_uuid_with_leading_zero</span><span class=p>,</span><span class=w> </span><span class=na>@dumper</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-45>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-46>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_uuid_with_leading_zero</span><span class=p data-group-id=2879120019-46>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-47>(</span><span class=na>@test_prefixed_uuid_null</span><span class=p>,</span><span class=w> </span><span class=na>@dumper</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-47>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-48>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_uuid_null</span><span class=p data-group-id=2879120019-48>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-49>(</span><span class=na>@test_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@dumper</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-49>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:error</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-50>(</span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=na>@dumper</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-50>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-51>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p data-group-id=2879120019-51>}</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-52>(</span><span class=na>@test_prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=na>@dumper</span><span class=p>,</span><span class=w> </span><span class=na>@belongs_to_params</span><span class=p data-group-id=2879120019-52>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=p data-group-id=2879120019-53>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=na>@test_uuid</span><span class=p data-group-id=2879120019-53>}</span><span class=w>
  </span><span class=k data-group-id=2879120019-42>end</span><span class=w>

  </span><span class=n>test</span><span class=w> </span><span class=s>"autogenerate/1"</span><span class=w> </span><span class=k data-group-id=2879120019-54>do</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=n>prefixed_uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>autogenerate</span><span class=p data-group-id=2879120019-55>(</span><span class=na>@params</span><span class=p data-group-id=2879120019-55>)</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=p data-group-id=2879120019-56>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=n>uuid</span><span class=p data-group-id=2879120019-56>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=o>.</span><span class=n>dump</span><span class=p data-group-id=2879120019-57>(</span><span class=n>prefixed_uuid</span><span class=p>,</span><span class=w> </span><span class=no>nil</span><span class=p>,</span><span class=w> </span><span class=na>@params</span><span class=p data-group-id=2879120019-57>)</span><span class=w>
    </span><span class=n>assert</span><span class=w> </span><span class=p data-group-id=2879120019-58>{</span><span class=ss>:ok</span><span class=p>,</span><span class=w> </span><span class=p data-group-id=2879120019-59>%</span><span class=nc data-group-id=2879120019-59>UUID</span><span class=p data-group-id=2879120019-59>{</span><span class=ss>format</span><span class=p>:</span><span class=w> </span><span class=ss>:raw</span><span class=p>,</span><span class=w> </span><span class=ss>version</span><span class=p>:</span><span class=w> </span><span class=mi>7</span><span class=p data-group-id=2879120019-59>}</span><span class=p data-group-id=2879120019-58>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>UUID</span><span class=o>.</span><span class=n>parse</span><span class=p data-group-id=2879120019-60>(</span><span class=n>uuid</span><span class=p data-group-id=2879120019-60>)</span><span class=w>
  </span><span class=k data-group-id=2879120019-54>end</span><span class=w>
</span><span class=k data-group-id=2879120019-1>end</span></code></pre>
<p>
With this we can set up our schema module key types:</p>
<pre><code class="makeup elixir"><span class=na>@primary_key</span><span class=w> </span><span class=p data-group-id=1087906949-1>{</span><span class=ss>:id</span><span class=p>,</span><span class=w> </span><span class=nc>PrefixedUUID</span><span class=p>,</span><span class=w> </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=s>"test"</span><span class=p>,</span><span class=w> </span><span class=ss>autogenerate</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p data-group-id=1087906949-1>}</span><span class=w>
</span><span class=na>@foreign_key_type</span><span class=w> </span><span class=nc>PrefixedUUID</span></code></pre>
<p>
We can make it more DRY by setting up and using a <code class=inline>MyApp.Schema</code> module instead of <code class=inline>Ecto.Schema</code> in our schema modules:</p>
<pre><code class="makeup elixir"><span class=kd>defmodule</span><span class=w> </span><span class=nc>MyApp.Schema</span><span class=w> </span><span class=k data-group-id=4258209174-1>do</span><span class=w>
  </span><span class=na>@moduledoc</span><span class=w> </span><span class=s>"""
  This module defines the default schema settings for schema modules
  in MyApp.

  Primary and foreign keys are prefixed UUIDs.

  ## Usage

      defmodule MyApp.Accounts.Account do
        use MyApp.Schema, prefix: "acct"

        # ...
      end
  """</span><span class=w>

  </span><span class=kd>defmacro</span><span class=w> </span><span class=nf>__using__</span><span class=p data-group-id=4258209174-2>(</span><span class=n>opts</span><span class=w> </span><span class=o>\\</span><span class=w> </span><span class=p data-group-id=4258209174-3>[</span><span class=p data-group-id=4258209174-3>]</span><span class=p data-group-id=4258209174-2>)</span><span class=w> </span><span class=k data-group-id=4258209174-4>do</span><span class=w>
    </span><span class=n>prefix</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nc>Keyword</span><span class=o>.</span><span class=n>fetch!</span><span class=p data-group-id=4258209174-5>(</span><span class=n>opts</span><span class=p>,</span><span class=w> </span><span class=ss>:prefix</span><span class=p data-group-id=4258209174-5>)</span><span class=w>

    </span><span class=k>quote</span><span class=w> </span><span class=k data-group-id=4258209174-6>do</span><span class=w>
      </span><span class=kn>use</span><span class=w> </span><span class=nc>Ecto.Schema</span><span class=w>

      </span><span class=na>@primary_key</span><span class=w> </span><span class=p data-group-id=4258209174-7>{</span><span class=ss>:id</span><span class=p>,</span><span class=w> </span><span class=nc>MyApp.PrefixedUUID</span><span class=p>,</span><span class=w> </span><span class=ss>prefix</span><span class=p>:</span><span class=w> </span><span class=k>unquote</span><span class=p data-group-id=4258209174-8>(</span><span class=n>prefix</span><span class=p data-group-id=4258209174-8>)</span><span class=p>,</span><span class=w> </span><span class=ss>autogenerate</span><span class=p>:</span><span class=w> </span><span class=no>true</span><span class=p data-group-id=4258209174-7>}</span><span class=w>
      </span><span class=na>@foreign_key_type</span><span class=w> </span><span class=nc>MyApp.PrefixedUUID</span><span class=w>

      </span><span class=na>@type</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=o>::</span><span class=w> </span><span class=p>%</span><span class=bp>__MODULE__</span><span class=p data-group-id=4258209174-9>{</span><span class=p data-group-id=4258209174-9>}</span><span class=w>
    </span><span class=k data-group-id=4258209174-6>end</span><span class=w>
  </span><span class=k data-group-id=4258209174-4>end</span><span class=w>
</span><span class=k data-group-id=4258209174-1>end</span></code></pre>
 </div>
</div>
<div class="mx-auto px-4 py-8 mamax-w-2xl">
 <ul class="flex flex-wrap justify-center">
 <li class=m-2>
 <a href="mailto:?subject=Dan%20Schultzer:%20Prefixed%20base62%20UUIDv7%20Object%20IDs%20with%20Ecto&amp;body=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto" class="cursor-pointer text-sm font-light uppercase py-2 px-3 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80 flex justify-between items-center">
 <span class="hero-envelope-solid w-4 h-4 mr-2"></span> Email
 </a>
 </li>
 <li class=m-2>
 <a href="https://reddit.com/submit?url=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto&amp;title=Dan%20Schultzer:%20Prefixed%20base62%20UUIDv7%20Object%20IDs%20with%20Ecto" class="cursor-pointer text-sm font-light uppercase py-2 px-3 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80 flex justify-between items-center" aria-label=Reddit>
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-5 h-5 mr-2" aria-hidden=true>
 <title>Reddit</title>
 <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path>
</svg> Submit
 </a>
 </li>
 <li class=m-2>
 <a href="https://twitter.com/share?url=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto&amp;text=Dan%20Schultzer:%20Prefixed%20base62%20UUIDv7%20Object%20IDs%20with%20Ecto" class="cursor-pointer text-sm font-light uppercase py-2 px-3 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80 flex justify-between items-center" aria-label=Twitter>
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-4 h-4 mr-2" aria-hidden=true>
 <title>Twitter</title>
 <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path>
</svg> Tweet
 </a>
 </li>
 <li class=m-2>
 <a href="https://www.facebook.com/sharer/sharer.php?u=https://danschultzer.com/posts/prefixed-base62-uuidv7-object-ids-with-ecto" class="cursor-pointer text-sm font-light uppercase py-2 px-3 rounded-full text-slate-50/90 bg-violet-800/50 hover:bg-violet-800 hover:text-slate-50 dark:bg-violet-800 dark:text-white/50 hover:dark:bg-violet-800/80 hover:dark:text-slate-50/80 flex justify-between items-center" aria-label=Facebook>
 <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" stroke=none fill=currentColor class="w-4 h-4 mr-2" aria-hidden=true>
 <title>Facebook</title>
 <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
</svg> Share
 </a>
 </li>
 </ul>
</div>
<div class="bg-violet-800 text-slate-50 font-cormorant dark:text-gray-300">
 <div class="mx-auto px-4 py-5 max-w-3xl">
 <p class="pt-5 text-xl text-center">
 Hi, I'm Dan Schultzer, I write in this blog, work a lot in Elixir, maintain several <a href=https://github.com/danschultzer class=underline>open source projects</a>, and help companies streamline their development process
 <a href=https://danschultzer.com/about data-phx-link=redirect data-phx-link-state=push aria-label="Go to about">
 <span class="hero-arrow-right-mini h-4 w-4 inline-block text-orange-200"></span>
 </a>
 </p>
 </div>
</div>
</main>
<footer class="bg-violet-800 text-slate-50 dark:text-slate-50/80">
 <div class="mx-auto px-4 py-5 max-w-2xl text-center">
 <p class="text-sm text-slate-400 mb-3">Built with Phoenix, NimblePublisher, and Tailwind.</p>
 <p>Copyright 2023, Dan Schultzer.</p>
 </div>
</footer></div>
 
<div style=display:block;opacity:1;color-scheme:light><template shadowrootmode=open><iframe allowtransparency=true frameborder=0 scrolling=no class=sk_ui title=Surfingkeys style=position:fixed;left:0px;bottom:0px;width:100%;height:0px;z-index:2147483647></iframe></template></div><script data-template-shadow-root>(()=>{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll("template[shadowrootmode]").forEach(element=>{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute("shadowrootmode")});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()</script>